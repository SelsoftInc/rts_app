<h2 class="main-title">
  <a [routerLink]="['/submissions']">Submissions</a> / Add New Submission</h2>
<div class="utility-container">
  <div class="container">
    <form [formGroup]="myForm" (ngSubmit)="addNewSubmission(myForm)">

      <div class="row">
        <div class="col-sm-4">
          <label for="requirements" class="form-label">Requirements:</label>
          <select name="requirements" class="form-input" formControlName="requirements" (change)="getRequirement($event.target.value);"
                  ngModel="{{requirementId}}" required>
            <option value="">Select</option>
            <option *ngFor="let require of allRequirements" value="{{require.requirementId}}">{{require.position.positionName}} ({{require.client.name}})</option>
          </select>
        </div>

        <div class="col-sm-4" *ngIf="selectRequiement && userRole !== 'RECRUITER'">
          <label for="clientRate" class="form-label">Client Rate:</label>
          <input type="text" class="form-input" name="clientRate" formControlName="clientRate" ngModel="{{selectRequiement.clientRate}}"
                 readonly>
        </div>

        <div class="col-sm-4" *ngIf="selectRequiement && userRole !== 'RECRUITER'">
          <label for="sellingRate" class="form-label">Selling Rate:</label>
          <input type="text" class="form-input" name="sellingRate" formControlName="sellingRate" ngModel="{{selectRequiement.sellingRate}}">
        </div>

        <div class="col-sm-4" *ngIf="selectRequiement && userRole === 'RECRUITER'">
          <label for="sellingRate" class="form-label">Selling Rate:</label>
          <input type="text" class="form-input" name="sellingRate" formControlName="sellingRate" ngModel="{{selectRequiement.sellingRate}}"
                 readonly>
        </div>

        <div class="col-sm-4">
          <label for="buyingRate" class="form-label">Buying Rate:</label>
          <input type="text" class="form-input" name="buyingRate" formControlName="buyingRate" required>
        </div>

        <div class="col-sm-4">
          <label for="status" class="form-label">Status:</label>
          <select name="status" id="status" class="form-input" formControlName="status">
            <option value="">Select</option>
            <option *ngFor="let status of status" value="{{status.value}}">{{status.name}}</option>
          </select>
        </div>

      </div>




      <div class="form-group row">

      </div>

      <div class="form-group row" *ngIf="selectRequiement">
        <label for="clientContactname" class="col-sm-2 col-form-label">Client Contact name:</label>
        <div class="col-sm-4 ">
          <input type="text" class="form-control" name="clientContactname" formControlName="clientContactname" ngModel="{{clientRecruiterName}}"
            readonly>
        </div>
      </div>

      <div class="form-group row" *ngIf="selectRequiement">
        <label for="clientContactEmail" class="col-sm-2 col-form-label">Client Contact Email:</label>
        <div class="col-sm-4 ">
          <input type="text" class="form-control" name="clientContactEmail" formControlName="clientContactEmail" ngModel="{{clientRecruiterEmail}}"
            readonly>
        </div>
      </div>


      <div class="form-group row" *ngIf="selectRequiement">
        <label for="accountName" class="col-sm-2 col-form-label">Account Name:</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" name="accountName" formControlName="accountName" value="{{selectRequiement.account.accountName}}"
            readonly>
        </div>
      </div>

      <div class="form-group row" *ngIf="selectRequiement">
        <label for="workLocation" class="col-sm-2 col-form-label">Work Location:</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" name="workLocation" formControlName="workLocation" value="{{selectRequiement.location}}"
            readonly>
        </div>
      </div>

      <!-- <div class="form-group">
        <div>
          <label class="fileContainer">
            <button class="btn btn-secondary" >
              Attach For Submission</button>
            <input type="file" (change)="fileChangeEvent($event)" multiple />
          </label>
        </div>
        <div class="pb-2" *ngFor="let file of getFiles">
          <a class="panel">{{file.name}}
          </a>
          <a class="btn" (click)="removeFile(file)">
            <i class="material-icons">
              clear
            </i>
          </a>
        </div>
      </div> -->

      <h2 class="form-title">Candidate Deatils:</h2>

      <div class="row">
        <div class="col-sm-4">
          <label for="candidateEmail" class="form-label">Candidate Email:</label>
          <input type="text" class="form-input" name="candidateEmail" pattern="^[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})$"
                   formControlName="candidateEmail" value="{{selectedCandidate.email}}" required>
        </div>
        <div class="col-sm-1">
          <button type="button" class="btn btn-forms mt-5 pt-1" (click)="getCandidateDetails()">Search</button>
        </div>

      </div>



      <div *ngIf="isCandidate">
        <div class="row pt-3">
          <div class="col-6">

            <div class="form-group row">
              <div class="col-sm-7">
                <label for="candidateImmigirationStatus" class="form-label">Candidate Immigiration Status:</label>
                <mat-radio-group formControlName="candidateImmigirationStatus" disabled>
                  <mat-radio-button value="GC">GC</mat-radio-button>
                  <mat-radio-button value="CITIZEN">CITIZEN</mat-radio-button>
                  <mat-radio-button value="H1B">H1B</mat-radio-button>
                  <mat-radio-button value="W1/1099">W2/1099</mat-radio-button>
                  <mat-radio-button value="OPT/CPT">OPT/CPT</mat-radio-button>
                  <mat-radio-button value="EAD">EAD</mat-radio-button>
                  <mat-radio-button value="H4AD">H4AD</mat-radio-button>
                </mat-radio-group>
              </div>
            </div>

            <div class="form-group row">
              <label for="candidateName" class="col-sm-4 col-form-label">Candidate Name:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="candidateName" formControlName="candidateName" value="{{selectedCandidate.name}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="candidatePhone" class="col-sm-4 col-form-label">Candidate Phone:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="candidatePhone" formControlName="candidatePhone" value="{{selectedCandidate.phoneNumber}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="candidateLocation" class="col-sm-4 col-form-label">Candidate Location:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="candidateLocation" formControlName="candidateLocation" value="{{selectedCandidate.location}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="availability" class="col-sm-4 col-form-label">Availability:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="availability" formControlName="availability" value="{{selectedCandidate.availability}}"
                  readonly>
              </div>
            </div>


            <div class="form-group row">
              <label for="technology" class="col-sm-4 col-form-label">Technology:</label>
              <div class="col-sm-7">
                <select name="technology" class="form-control" formControlName="technology" ngModel="{{selectedCandidate.technology[0].technologyId}}"
                  disabled>
                  <option *ngFor="let tech of selectedCandidate.technology" value="{{tech.technologyId}}">{{tech.technologyName}}</option>
                </select>
              </div>
            </div>

            <div class="form-group row">
              <label for="skype" class="col-sm-4 col-form-label">Skype:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="skype" formControlName="skype" value="{{selectedCandidate.skype}}" readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="linkedIn" class="col-sm-4 col-form-label">LinkedIn:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="linkedIn" formControlName="linkedIn" value="{{selectedCandidate.linkedIn}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row" *ngIf="selectedCandidate">
              <label for="editRelocate" class="col-sm-4 col-form-label">Willing To Relocate:</label>
              <div class="col-sm-7">
                <mat-radio-group formControlName="editRelocate" disabled>
                  <mat-radio-button value="true">Yes</mat-radio-button>
                  <mat-radio-button value="false">No</mat-radio-button>
                </mat-radio-group>
              </div>
            </div>

            <div class="form-group row" *ngIf="selectedCandidate">
              <label for="editResonForChange" class="col-sm-4 col-form-label">Reson For Change:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="editResonForChange" formControlName="editResonForChange" readonly ngModel="{{selectedCandidate.reasonForChange}}">
              </div>
            </div>

            <div class="form-group row" *ngIf="selectedCandidate">
              <label for="editInterview" class="col-sm-4 col-form-label">Availability For Inteview:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="editInterview" formControlName="editInterview" readonly ngModel="{{selectedCandidate.availableTimeForInterview}}">
              </div>
            </div>

            <div class="form-group row" *ngIf="selectedCandidate">
              <label for="editExperience" class="col-sm-4 col-form-label">Relevant Experience:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="editExperience" formControlName="editExperience" readonly ngModel="{{selectedCandidate.experience}}">
              </div>
            </div>

            <div class="form-group row" *ngIf="selectedCandidate">
              <label for="editTotalExperience" class="col-sm-4 col-form-label">Total Experience:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="totalExperience" formControlName="totalExperience" readonly ngModel="{{selectedCandidate.totalExperience}}">
              </div>
            </div>

            <div class="form-group row">
              <label for="c2c" class="col-sm-4 col-form-label">C2C:</label>
              <div class="col-sm-7">
                <mat-radio-group formControlName="c2c" disabled>
                  <mat-radio-button value="Yes">Yes</mat-radio-button>
                  <mat-radio-button value="No">No</mat-radio-button>
                </mat-radio-group>
              </div>
            </div>

            <div class="form-group" *ngIf="selectedCandidate.mediaFiles.length > 0">
              <label>Attachements:</label>
              <div class="pt-3" *ngFor="let media of selectedCandidate.mediaFiles">
                <i class="panel btn" (click)="openFiles(media);">{{media.fileName}}
                </i>
              </div>

            </div>
          </div>

          <div class="col-6" *ngIf="isC2c">

            <legend class="sub-heading">Employer Details:</legend>

            <div class="form-group row">
              <label for="employerName" class="col-sm-4 col-form-label">Employer Name:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="employerName" formControlName="employerName" ngModel="{{selectedCandidate.employeeName}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="employerContactName" class="col-sm-4 col-form-label">Employer Contact Name:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="employerContactName" formControlName="employerContactName" ngModel="{{selectedCandidate.employeeContactName}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="employerPhone" class="col-sm-4 col-form-label">Employer Phone:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="employerPhone" formControlName="employerPhone" ngModel="{{selectedCandidate.employeeContactPhone}}"
                  readonly>
              </div>
            </div>

            <div class="form-group row">
              <label for="employerEmail" class="col-sm-4 col-form-label">Employer Email:</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" name="employerEmail" formControlName="employerEmail" ngModel="{{selectedCandidate.employeeContactEmail}}"
                  readonly>
              </div>
            </div>

          </div>

        </div>
      </div>

      <div *ngIf="!isCandidate">

        <div class="row">
          <div class="col-sm-7">
            <div><label for="editCandidateImmigirationStatus" class="form-label">Candidate Immigiration Status:</label></div>
            <div class="pt-3">
              <mat-radio-group (change)="getImmigiration($event)" formControlName="editCandidateImmigirationStatus">
                <mat-radio-button value="GC">GC</mat-radio-button>
                <mat-radio-button value="CITIZEN">CITIZEN</mat-radio-button>
                <mat-radio-button value="H1B">H1B</mat-radio-button>
                <mat-radio-button value="W1/1099">W2/1099</mat-radio-button>
                <mat-radio-button value="OPT/CPT">OPT/CPT</mat-radio-button>
                <mat-radio-button value="EAD">EAD</mat-radio-button>
                <mat-radio-button value="H4AD">H4AD</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4">
            <label for="editCandidateName" class="form-label">Candidate Name:</label>
            <input type="text" class="form-input" name="editCandidateName" formControlName="editCandidateName">
          </div>

          <div class="col-sm-4">
            <label for="editCandidatePhone" class="form-label">Candidate Phone:</label>
            <input type="text" class="form-input" name="editCandidatePhone" formControlName="editCandidatePhone">
          </div>

          <div class="col-sm-4">
            <label for="editCandidateLocation" class="form-label">Candidate Location:</label>
            <input type="text" class="form-input" name="editCandidateLocation" formControlName="editCandidateLocation">
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4">
            <label for="editAvailability" class="form-label">Availability:</label>
            <input type="text" class="form-input" name="editAvailability" formControlName="editAvailability">
          </div>

          <div class="col-sm-4">
            <label for="editTechnology" class="form-label">Technology:</label>
            <select name="editTechnology" class="form-input" formControlName="editTechnology" (change)="addTechnology($event.target.value);">
              <option value="">Select</option>
              <option *ngFor="let tech of technology" value="{{tech.technologyId}}">{{tech.technologyName}}</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="col-sm-4" *ngIf="isOtherTechnology">
            <label for="otherTechnology" class="col-sm-4 col-form-label">Add New Technology:</label>
            <input type="text" class="form-control" name="otherTechnology" formControlName="otherTechnology" placeholder=" Enter the Technology">
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4">
            <label for="interview" class="form-label">Availability For Interview:</label>
            <input type="text" class="form-input" name="interview" ngModel formControlName="interview">
          </div>

          <div class="col-sm-4">
            <label for="experience" class="form-label">Relevant Experience:</label>
            <input type="text" class="form-input" name="experience" ngModel formControlName="experience">
          </div>

          <div class="col-sm-4">
            <label for="totalExperience" class="form-label">Total Experience:</label>
            <input type="text" class="form-input" name="totalExperience" ngModel formControlName="totalExperience">
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4">
            <label for="editSkype" class="form-label">Skype:</label>
            <input type="text" class="form-input" name="editSkype" formControlName="editSkype">
          </div>
          <div class="col-sm-4">
            <label for="editLinkedIn" class="form-label">LinkedIn:</label>
            <input type="text" class="form-input" name="editLinkedIn" formControlName="editLinkedIn">
          </div>
          <div class="col-sm-4">
            <label for="resonForChange" class="form-label">Reson For Change:</label>
            <input type="text" class="form-input" name="resonForChange" ngModel formControlName="resonForChange">
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4">
            <div class="mb-4">
              <label for="relocate" class="form-label">Willing To Relocate:</label>
            </div>
            <mat-radio-group formControlName="relocate" (change)="relocate($event);">
              <mat-radio-button value="true" checked>Yes</mat-radio-button>
              <mat-radio-button value="false">No</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="col-sm-4">
            <div class="mb-4">
              <label for="c2c" class="form-label">C2C:</label>
            </div>
            <mat-radio-group (change)="getC2c($event)">
              <mat-radio-button value="Yes">Yes</mat-radio-button>
              <mat-radio-button value="No" checked>No</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <div class="row pt-3">

          <div class="col-12" *ngIf="isEmployerDetails">

            <h2 class="form-title">Employer Details:</h2>

            <div class="row">
              <div class="col-sm-4">
                <label for="employerName" class="form-label">Employer Name:</label>
                <input type="text" class="form-input" name="employerName" ngModel formControlName="employerName">
              </div>

              <div class="col-sm-4">
                <label for="employerContactName" class="form-label">Employer Contact Name:</label>
                <input type="text" class="form-input" name="employerContactName" ngModel formControlName="employerContactName">
              </div>

              <div class="col-sm-4">
                <label for="employerPhone" class="form-label">Employer Phone:</label>
                <input type="text" class="form-input" name="employerPhone" ngModel formControlName="employerPhone">
              </div>
            </div>

            <div class="row">
              <div class="col-sm-4">
                <label for="employerEmail" class="form-label">Employer Email:</label>
                <input type="text" class="form-input" name="employerEmail" ngModel formControlName="employerEmail">
              </div>
            </div>

          </div>
        </div>

        <div class="form-group mt-4">
          <div>
            <label class="fileContainer">
              <button class="btn btn-secondary">
                Attach For Candidate</button>
              <input type="file" (change)="candidateFileEvent($event)" multiple/>
            </label>
          </div>
          <div class="pb-2" *ngFor="let file of candidateGetFiles">
            <a class="panel">{{file.name}}
            </a>
            <a class="btn" (click)="candidateRemoveFile(file)">
              <i class="material-icons">
                clear
              </i>
            </a>
          </div>
        </div>

      </div>

      <div class="form-btn-container">
        <button class="btn btn-forms btn-space" type="submit" [disabled]="!myForm.valid">Add Submission</button>
        <button [routerLink]="[ '/submissions']" class="btn btn-forms btn-space">Cancel</button>
        <!-- <button type="button" class="btn btn-default" (click)="saveFormData(myForm)">Save</button> -->
      </div>

    </form>
  </div>
</div>

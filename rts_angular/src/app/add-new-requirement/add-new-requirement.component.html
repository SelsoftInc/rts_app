<div class="utility-container">
  <form [formGroup]="myForm" (ngSubmit)="addNewRequirement(myForm)">
    <legend class="header">Add New Requirement</legend>

    <div class="form-group row">
      <label for="positionName" class="col-sm-2 col-form-label">Position Name:</label>
      <div class="col-sm-4">
        <select name="positionName" class="form-control" formControlName="positionName" (change)="changePositionName($event.target.value);"
          required>
          <option value="">Select</option>
          <option *ngFor="let name of positions" value="{{name.positionId}}">{{name.positionName}}</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="col-sm-4" *ngIf="isOtherPositionName">
        <input type="text" class="form-control" name="otherPositionName" formControlName="otherPositionName" placeholder=" Enter the Position Name"
          required>
      </div>
    </div>

    <div class="form-group row">
      <label for="status" class="col-sm-2 col-form-label">Status:</label>
      <div class="col-sm-4">
        <select name="status" class="form-control" formControlName="status" required>
          <option value="">Select</option>
          <option *ngFor="let status of requirementStatus" value="{{status.value}}">{{status.name}}</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="accountName" class="col-sm-2 col-form-label">Account Name:</label>
      <div class="col-sm-4">
        <select name="accountName" class="form-control" formControlName="accountName" (change)="changeAccountName($event.target.value);"
          required>
          <option value="">Select</option>
          <option *ngFor="let name of accounts" value="{{name.accountId}}">{{name.accountName}}</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="col-sm-4" *ngIf="isOtherAccountName">
        <input type="text" class="form-control" name="otherAccountName" formControlName="otherAccountName" placeholder=" Enter the Account Name"
          required>
      </div>
    </div>

    <div class="form-group row">
      <label for="priority" class="col-2 col-form-label">Priority:</label>
      <div class="col-4">
        <select name="priority" class="form-control" formControlName="priority" required>
          <option value="">Select</option>
          <option value="HIGH">High</option>
          <option value="MEDIUM">Medium</option>
          <option value="CRITICAL">Critical</option>
          <option value="LOW">Low</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="location" class="col-sm-2 col-form-label">Location:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" maxlength="80" name="location" formControlName="location" required>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label">Requirement Type:</label>
      <div *ngFor="let type of requirementType" ng-checked="requirementByUser.indexOf(type) != 1" (change)="getCheckedRequirementType(type)">
        <div class="col-md-6">
          <input type='checkbox' formControlName="requirementType" [value]="type">
          <span class="label">{{type}}</span>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="positionsCount" class="col-sm-2 col-form-label ">No.of Positions:</label>
      <div class="col-sm-4">
        <input type="text" maxlength="2" class="form-control" name="positionsCount" formControlName="positionsCount" required>
      </div>
    </div>

    <div class="form-group row">
      <label for="immigrationRequirement" class="col-sm-2 col-form-label">Immigration Requirement:</label>
      <div *ngFor="let data of immigration" ng-checked="immigrationByUser.indexOf(data) != 1" (change)="getCheckedImmigrationValue(data)">
        <div class="col-sm-4 ">
          <input type="checkbox" formControlName="immigrationRequirement" [value]="data">
          <span class="label">{{data}}</span>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="clientName" class="col-sm-2 col-form-label">Client:</label>
      <div class="col-sm-4">
        <select name="clientName" class="form-control" formControlName="clientName" required>
          <option value="">Select</option>
          <option *ngFor="let client of clients" value="{{client.clientId}}">{{client.name}}</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="clientRate" class="col-sm-2 col-form-label">Client Rate:</label>
      <div class="col-sm-4 ">
        <input type="text" class="form-control" name="clientRate" maxlength="25" formControlName="clientRate" required>
      </div>
    </div>

    <div class="form-group row">
      <label for="sellingRate" class="col-sm-2 col-form-label">Selling Rate:</label>
      <div class="col-sm-4 ">
        <input type="text" class="form-control" name="sellingRate" maxlength="25" formControlName="sellingRate" required>
      </div>
    </div>

    <div class="form-group row">
      <label for="jobDescription" class="col-sm-2 col-form-label">Job Description:</label>
      <div class="col-sm-4 ">
        <textarea rows="8" name="jobDescription" class="form-control" formControlName="jobDescription" placeholder="Description.."
          ngModel></textarea>
      </div>
    </div>

    <div class="form-group row">
      <label for="technologies" class="col-sm-2 col-form-label">Technologies:</label>
      <div class="col-sm-4">
        <select name="technologies" class="form-control" formControlName="technologies" (change)="addTechnology($event.target.value);"
          required>
          <option value="">Select</option>
          <option *ngFor="let tech of technologies" value="{{tech.technologyId}}">{{tech.technologyName}}</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="col-sm-4" *ngIf="isOtherTechnology">
        <input type="text" class="form-control" name="otherTechnology" formControlName="otherTechnology" placeholder=" Enter the Technology"
          required>
      </div>
    </div>

    <div class="form-group row">
      <label for="team" class="col-sm-2 col-form-label">Team:</label>
      <div class="col-sm-4 ">
        <select name="team" class="form-control" formControlName="team" (change)="selectTeam($event.target.value)" required>
          <option value="">Select</option>
          <option *ngFor="let team of teams" value="{{team.teamId}}">{{team.name}}</option>
        </select>
      </div>
    </div>

    <div class="form-group row" *ngIf="userRole === 'TL'">
      <label for="allocation" class="col-sm-2 col-form-label">Allocation:</label>
      <div class="col-sm-4 ">
        <select name="role" class="form-control" formControlName="allocation">
          <option value="">Select</option>
          <option *ngFor="let user of selectedTeamUsers" value="{{user.userId}}">{{user.firstName}} {{user.lastName}}</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="comments" class="col-sm-2 col-form-label">Comments:</label>
      <div class="col-sm-4">
        <textarea name="comments" class="form-control" formControlName="comments" maxlength="80" placeholder="Type Your Comments.."
          ngModel></textarea>
      </div>
    </div>

    <div class="form-btn-container">
      <button class="btn btn-default btn-space" type="submit" [disabled]="!myForm.valid">Add Requirement</button>
      <button [routerLink]="[ '/requirements']" class="btn btn-default">Cancel</button>
    </div>

  </form>
</div>
